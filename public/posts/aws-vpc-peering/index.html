<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Guide to AWS VPC Peering | Nadlir Blog</title>
<meta name="keywords" content="aws">
<meta name="description" content="Intro
VPC Peering is needed when you want to connect two different VPC each other. Mostly used for cross-department in SDLC.
In this example, I will connect between two VPCs Developer and Finance, and each VPC attached to different EC2 intance.
Check Private IP range of an EC2 instance
Make sure to check local IP address range for both Developer and Finance instances.

Navigate to the Developer instance, select and click on the Subnet ID
In the subnet section, select your subnet name and click on the Route table
In the route table section, select your route table and click Routes tab
Take a notes on the private IP address range for the Developer instance

Creating VPC Peering

Go to the VPC menu via console, select Peering connections, then click Create peering connection button
Enter your peering details such as:

Name: Developer &lt;&gt; Finance
VPC ID (Requester): Select the Developer VPC and check the local IP address range of the VPC
VPC ID (Accepter): Select the Finance VPC and check the local IP range of the VPC
Tags: Name =&gt; Developer &lt;&gt; Finance


Confirm click the Create peering connection
On the peering details, you can see the Status is Pending
Click Actions menu and select Accept request and confirm again (The Status of peering become Active)

Adding VPC Peering to Subnet Route Table
This must be done on EC2 servers for both Developer and Finance.">
<meta name="author" content="Nadlir">
<link rel="canonical" href="http://localhost:1313/posts/aws-vpc-peering/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://ndlrfz.github.io/blog/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://ndlrfz.github.io/blog/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="https://ndlrfz.github.io/blog/favicon.ico">
<link rel="apple-touch-icon" href="https://ndlrfz.github.io/blog/favicon.ico">
<link rel="mask-icon" href="https://ndlrfz.github.io/blog/favicon.ico">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/aws-vpc-peering/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="http://localhost:1313/posts/aws-vpc-peering/">
  <meta property="og:site_name" content="Nadlir Blog">
  <meta property="og:title" content="Guide to AWS VPC Peering">
  <meta property="og:description" content="Intro VPC Peering is needed when you want to connect two different VPC each other. Mostly used for cross-department in SDLC.
In this example, I will connect between two VPCs Developer and Finance, and each VPC attached to different EC2 intance.
Check Private IP range of an EC2 instance Make sure to check local IP address range for both Developer and Finance instances.
Navigate to the Developer instance, select and click on the Subnet ID In the subnet section, select your subnet name and click on the Route table In the route table section, select your route table and click Routes tab Take a notes on the private IP address range for the Developer instance Creating VPC Peering Go to the VPC menu via console, select Peering connections, then click Create peering connection button Enter your peering details such as: Name: Developer &lt;&gt; Finance VPC ID (Requester): Select the Developer VPC and check the local IP address range of the VPC VPC ID (Accepter): Select the Finance VPC and check the local IP range of the VPC Tags: Name =&gt; Developer &lt;&gt; Finance Confirm click the Create peering connection On the peering details, you can see the Status is Pending Click Actions menu and select Accept request and confirm again (The Status of peering become Active) Adding VPC Peering to Subnet Route Table This must be done on EC2 servers for both Developer and Finance.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-03-21T00:22:46+07:00">
    <meta property="article:modified_time" content="2025-03-21T00:22:46+07:00">
    <meta property="article:tag" content="Aws">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Guide to AWS VPC Peering">
<meta name="twitter:description" content="Intro
VPC Peering is needed when you want to connect two different VPC each other. Mostly used for cross-department in SDLC.
In this example, I will connect between two VPCs Developer and Finance, and each VPC attached to different EC2 intance.
Check Private IP range of an EC2 instance
Make sure to check local IP address range for both Developer and Finance instances.

Navigate to the Developer instance, select and click on the Subnet ID
In the subnet section, select your subnet name and click on the Route table
In the route table section, select your route table and click Routes tab
Take a notes on the private IP address range for the Developer instance

Creating VPC Peering

Go to the VPC menu via console, select Peering connections, then click Create peering connection button
Enter your peering details such as:

Name: Developer &lt;&gt; Finance
VPC ID (Requester): Select the Developer VPC and check the local IP address range of the VPC
VPC ID (Accepter): Select the Finance VPC and check the local IP range of the VPC
Tags: Name =&gt; Developer &lt;&gt; Finance


Confirm click the Create peering connection
On the peering details, you can see the Status is Pending
Click Actions menu and select Accept request and confirm again (The Status of peering become Active)

Adding VPC Peering to Subnet Route Table
This must be done on EC2 servers for both Developer and Finance.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Guide to AWS VPC Peering",
      "item": "http://localhost:1313/posts/aws-vpc-peering/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Guide to AWS VPC Peering",
  "name": "Guide to AWS VPC Peering",
  "description": "Intro VPC Peering is needed when you want to connect two different VPC each other. Mostly used for cross-department in SDLC.\nIn this example, I will connect between two VPCs Developer and Finance, and each VPC attached to different EC2 intance.\nCheck Private IP range of an EC2 instance Make sure to check local IP address range for both Developer and Finance instances.\nNavigate to the Developer instance, select and click on the Subnet ID In the subnet section, select your subnet name and click on the Route table In the route table section, select your route table and click Routes tab Take a notes on the private IP address range for the Developer instance Creating VPC Peering Go to the VPC menu via console, select Peering connections, then click Create peering connection button Enter your peering details such as: Name: Developer \u0026lt;\u0026gt; Finance VPC ID (Requester): Select the Developer VPC and check the local IP address range of the VPC VPC ID (Accepter): Select the Finance VPC and check the local IP range of the VPC Tags: Name =\u0026gt; Developer \u0026lt;\u0026gt; Finance Confirm click the Create peering connection On the peering details, you can see the Status is Pending Click Actions menu and select Accept request and confirm again (The Status of peering become Active) Adding VPC Peering to Subnet Route Table This must be done on EC2 servers for both Developer and Finance.\n",
  "keywords": [
    "aws"
  ],
  "articleBody": "Intro VPC Peering is needed when you want to connect two different VPC each other. Mostly used for cross-department in SDLC.\nIn this example, I will connect between two VPCs Developer and Finance, and each VPC attached to different EC2 intance.\nCheck Private IP range of an EC2 instance Make sure to check local IP address range for both Developer and Finance instances.\nNavigate to the Developer instance, select and click on the Subnet ID In the subnet section, select your subnet name and click on the Route table In the route table section, select your route table and click Routes tab Take a notes on the private IP address range for the Developer instance Creating VPC Peering Go to the VPC menu via console, select Peering connections, then click Create peering connection button Enter your peering details such as: Name: Developer \u003c\u003e Finance VPC ID (Requester): Select the Developer VPC and check the local IP address range of the VPC VPC ID (Accepter): Select the Finance VPC and check the local IP range of the VPC Tags: Name =\u003e Developer \u003c\u003e Finance Confirm click the Create peering connection On the peering details, you can see the Status is Pending Click Actions menu and select Accept request and confirm again (The Status of peering become Active) Adding VPC Peering to Subnet Route Table This must be done on EC2 servers for both Developer and Finance.\nHere I will configure the Developer instance.\nBack to the EC2 instance and select Developer instance details, then Subnet ID =\u003e Route table =\u003e Routes (like the first step)\nClick Edit routes to add new routes for VPC peering\nClick Add route with the following:\nDestination: Enter local IP address range for the Finance instance Target: Peering connection and select your VPC Peering that you’ve created Save changes Now move to the EC2 instance and select the Finance instance. Then, do the same as on top, but make sure to enter the IP address range of the Developer instance in the Destination.\nAllow ICMP/Ping between EC2 Instances In this example, I will allow ping to the Finance instance from the Developer instance.\nClick on the EC2 and select the Finance instance Click on the Security tab and then click Security groups section In the Inbound rules tab, click Edit inbound rules Now Add rule Type: Custom ICMP- IPv4 Source: Enter the range IP address of Developer instance Save rules Test VPC Peering Connect to your EC2 instance (Developer) via Session Manager or SSH You can now ping to the local IP of the Finance instance ",
  "wordCount" : "430",
  "inLanguage": "en",
  "datePublished": "2025-03-21T00:22:46+07:00",
  "dateModified": "2025-03-21T00:22:46+07:00",
  "author":[{
    "@type": "Person",
    "name": "Nadlir"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/posts/aws-vpc-peering/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Nadlir Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://ndlrfz.github.io/blog/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Nadlir Blog (Alt + H)">Nadlir Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Guide to AWS VPC Peering
    </h1>
    <div class="post-meta"><span title='2025-03-21 00:22:46 +0700 WIB'>March 21, 2025</span>&nbsp;·&nbsp;Nadlir

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#intro" aria-label="Intro">Intro</a></li>
                <li>
                    <a href="#check-private-ip-range-of-an-ec2-instance" aria-label="Check Private IP range of an EC2 instance">Check Private IP range of an EC2 instance</a></li>
                <li>
                    <a href="#creating-vpc-peering" aria-label="Creating VPC Peering">Creating VPC Peering</a></li>
                <li>
                    <a href="#adding-vpc-peering-to-subnet-route-table" aria-label="Adding VPC Peering to Subnet Route Table">Adding VPC Peering to Subnet Route Table</a></li>
                <li>
                    <a href="#allow-icmpping-between-ec2-instances" aria-label="Allow ICMP/Ping between EC2 Instances">Allow ICMP/Ping between EC2 Instances</a></li>
                <li>
                    <a href="#test-vpc-peering" aria-label="Test VPC Peering">Test VPC Peering</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="intro">Intro<a hidden class="anchor" aria-hidden="true" href="#intro">#</a></h2>
<p>VPC Peering is needed when you want to connect <strong>two</strong> different VPC each other. Mostly used for cross-department in SDLC.</p>
<p>In this example, I will connect between two VPCs <em>Developer</em> and <em>Finance</em>, and each VPC attached to different EC2 intance.</p>
<h2 id="check-private-ip-range-of-an-ec2-instance">Check Private IP range of an EC2 instance<a hidden class="anchor" aria-hidden="true" href="#check-private-ip-range-of-an-ec2-instance">#</a></h2>
<p><strong>Make sure to check local IP address range for both <em>Developer</em> and <em>Finance</em> instances.</strong></p>
<ol>
<li>Navigate to the <em>Developer</em> instance, select and click on the <code>Subnet ID</code></li>
<li>In the subnet section, select your subnet name and click on the <code>Route table</code></li>
<li>In the route table section, select your route table and click <code>Routes</code> tab</li>
<li>Take a notes on the private IP address range for the <em>Developer</em> instance</li>
</ol>
<h2 id="creating-vpc-peering">Creating VPC Peering<a hidden class="anchor" aria-hidden="true" href="#creating-vpc-peering">#</a></h2>
<ol>
<li>Go to the <code>VPC</code> menu via console, select <code>Peering connections</code>, then click <code>Create peering connection</code> button</li>
<li>Enter your peering details such as:
<ul>
<li><em>Name</em>: Developer &lt;&gt; Finance</li>
<li><em>VPC ID (Requester)</em>: Select the <strong>Developer</strong> VPC and check the local IP address range of the VPC</li>
<li><em>VPC ID (Accepter)</em>: Select the <strong>Finance</strong> VPC and check the local IP range of the VPC</li>
<li><em>Tags</em>: Name =&gt; Developer &lt;&gt; Finance</li>
</ul>
</li>
<li>Confirm click the <code>Create peering connection</code></li>
<li>On the peering details, you can see the <strong>Status</strong> is <em>Pending</em></li>
<li>Click <code>Actions</code> menu and select <code>Accept request</code> and confirm again (The <strong>Status</strong> of peering become <em>Active</em>)</li>
</ol>
<h2 id="adding-vpc-peering-to-subnet-route-table">Adding VPC Peering to Subnet Route Table<a hidden class="anchor" aria-hidden="true" href="#adding-vpc-peering-to-subnet-route-table">#</a></h2>
<p><strong>This must be done on EC2 servers for both <em>Developer</em> and <em>Finance</em>.</strong></p>
<p><strong>Here I will configure the <em>Developer</em> instance.</strong></p>
<ol>
<li>
<p>Back to the EC2 instance and select <em>Developer</em> instance details, then <code>Subnet ID =&gt; Route table =&gt; Routes</code> (like the first step)</p>
</li>
<li>
<p>Click <code>Edit routes</code> to add new routes for VPC peering</p>
</li>
<li>
<p>Click <code>Add route</code> with the following:</p>
<ul>
<li><em>Destination</em>: Enter local IP address range for the <em>Finance</em> instance</li>
<li><em>Target</em>: <strong>Peering connection</strong> and select your <em>VPC Peering</em> that you&rsquo;ve created</li>
<li><strong>Save changes</strong></li>
</ul>
</li>
<li>
<p>Now move to the EC2 instance and select the <em>Finance</em> instance. Then, do the same as on top, but make sure to enter the <em>IP address range</em> of the <em>Developer</em> instance in the <em>Destination</em>.</p>
</li>
</ol>
<h2 id="allow-icmpping-between-ec2-instances">Allow ICMP/Ping between EC2 Instances<a hidden class="anchor" aria-hidden="true" href="#allow-icmpping-between-ec2-instances">#</a></h2>
<p>In this example, I will allow ping to the <em>Finance</em> instance from the <em>Developer</em> instance.</p>
<ol>
<li>Click on the EC2 and select the <em>Finance</em> instance</li>
<li>Click on the <code>Security</code> tab and then click <code>Security groups</code> section</li>
<li>In the <code>Inbound rules</code> tab, click <code>Edit inbound rules</code></li>
<li>Now <code>Add rule</code>
<ul>
<li><em>Type</em>: Custom ICMP- IPv4</li>
<li><em>Source</em>: Enter the range IP address of <em>Developer</em> instance</li>
<li><strong>Save rules</strong></li>
</ul>
</li>
</ol>
<h2 id="test-vpc-peering">Test VPC Peering<a hidden class="anchor" aria-hidden="true" href="#test-vpc-peering">#</a></h2>
<ol>
<li>Connect to your EC2 instance (<em>Developer</em>) via <em>Session Manager</em> or <em>SSH</em></li>
<li>You can now ping to the local IP of the <em>Finance</em> instance</li>
</ol>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/aws/">Aws</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Nadlir Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
